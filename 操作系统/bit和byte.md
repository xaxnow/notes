### 出现原因

因为计算机只能识别 0 和 1(0 或 1 就是一个 bit,bit 就是计算机最小的存储单元),所以用特定的 8 个 bit 二进制数字表示某个字节(即计算机编码,如 ASCII,Unicode),
如小写的 a,则对应数字 97(二进制则为 0110 0001)
1 byte = 8 bit

真空管时代的计算机尽管已经步入了现代计算机的范畴，但其体积之大、能耗之高、故障之多、价格之贵大大制约了它的普及应用。直到 1947 年，由 Bell 实验室的 William B. Shockley、 John Bardeen 和 Walter H. Brattain.发明了晶体管，开辟了电子时代新纪元，电子计算机也找到了腾飞的起点，一发而不可收……

### 1.二进制:bit

晶体管是一种微型电子开关。它们是计算机的"大脑"－－微处理器的基本组成部分。与基本的照明开关类似，晶体管有两种工作状态：通和断。晶体管的通/断（二进制功能）实现了计算机内部的信息处理。

计算机唯一能够理解的信息就是通和断两种状态的电信号。我们知道开关式电子电路由电线（电流流经的电路）和开关（通过闭合或切断电路来开/关闭电路的设备）。晶体管没有机械运动的部件，它通过电信号在通和断两种状态之间转换。晶体管的通/断转换使微处理器能够完成工作。

计算机所处理的数据信息,是以二进制数编码表示的,其二进制数"0"和"1"是构成信息的最小单位,称作"位"或"比特(bit)“.

### 2.字节

多个晶体管产生的 1 和 0 所形成的特定序列和模式可以表示字母、数字、颜色和图形等字符。这就是我们所熟悉的二进制表示法。

计算机是美国发明的，怎么表示他们的英文符号，数字，标点符号等。这些符号加起来共有 127 个，即 2 的 7 次方，于是他们规定 8 位二进制表示一个字符，其中用一个位来进行数据校验，其他七个位用来记录数据。于是规定 8 个位为一个“字节”，相当于用 8 个可以开合的晶体管来组成不同的状态以表示字符。

为什么一个字节规定为 8 位，而不是 7 位或者 16 位二进制，这好像是 1+1 为什么等于 2。

### 3.ASCII 码

开始计算机只在美国用。八位的字节一共可以组合出 256(2 的 8 次方)种不同的状态。

他们把其中的编号从 0 开始的 32 种状态分别规定了特殊的用途，一但终端、打印机遇上约定好的这些字节被传过来时，就要做一些约定的动作。遇上 00x10, 终端就换行，遇上 0x07, 终端就向人们嘟嘟叫，例如遇上 0x1b, 打印机就打印反白的字，或者终端就用彩色显示字母。他们看到这样很好，于是就把这些 0x20 以下的字节状态称为"控制码"．

他们又把所有的空格、标点符号、数字、大小写字母分别用连续的字节状态表示，一直编到了第 127 号，这样计算机就可以用不同字节来存储英语的文字了。大家 看到这样，都感觉很好，于是大家都把这个方案叫做 ANSI 的"Ascii"编码（American Standard Code for Information Interchange，美国信息互换标准代码）。当时世界上所有的计算机都用同样的 ASCII 方案来保存英文文字。

ASCII 码使用 7 位 2 进制数表示一个字符，这样，7 位 2 进制数可以表示出 2 的 7 次方个字符，共 128 个字符.。这 128 个符号（包括 32 个不能打印出来的控制符号），只占用了一个字节的后面 7 位，最前面的 1 位（最高位）在计算机内部通常保持为 0 （在数据传输时可用作奇偶校验位）。

img

3.ASCII 扩展码
英语用 128 个符号编码就够了，但随着计算机技术发展，一些发达国家也开始使用了计算机，而有些国家用的不是英文，他们的字母里有许多是 ASCII 里没有的，比如，在法语中，字母上方有注音符号，它就无法用 ASCII 码表示。为此，国际标准化组织又制定了 ISO2022 标准，它规定了在保持与 ISO646 兼容的前提下将 ASCII 字符集扩充为 8 位代码的统一方法。 ISO 陆续制定了一批适用于不同地区的扩充 ASCII 字符集，每种扩充 ASCII 字符集分别可以扩充 128 个字符，比如，法语中的 é 的编码为 130（二进制 10000010）。这些扩充字符的编码均为高位为 1 的 8 位代码（即十进制数 128~255 ），称为扩展 ASCII 码。

由于不同的国家有不同的字母，因此， 扩充的 ASCII 编码，虽然它们都使用 256 个符号的编码方式，代表的字母却不一样。比如，130 在法语编码中代表了 é，在希伯来语编码中却代表了字母 Gimel (ג)，在俄语编码中又会代表另一个符号。但是不管怎样，所有这些编码方式中，0—127 表示的符号是一样的，不一样的只是 128—255 的这一段。

#### 4.ANSI/MBCS 多字节编码

计算机发明之处及后面很长一段时间，只用应用于美国及西方一些发达国家，ASCII 能够很好满足用户的需求. 一个以字节就可以对这些字符进行编码。 但人类的贪婪是无限的，后来世界各个地区也将会用到计算机。而这些国家的语言字符不止 256 个，像咱祖先留给我们的常用汉字就有 6000 多个。

为了显示本国语言，必须对 ASCII 编码进行扩充，于是不同的国家和地区制定了不同的标准，由此产生了 GB2312, BIG5, JIS 等各自的编码标准。这些使用 2 个字节来代表一个字符的各种汉字延伸编码方式，称为 ANSI 编码，又称为"MBCS（Muilti-Bytes Charecter Set，多字节字符集）"。在简体中文系统下，ANSI 编码代表 GB2312 编码，在日文操作系统下，ANSI 编码代表 JIS 编码，所以在中文 windows 下要转码成 gb2312,gbk 只需要把文本保存为 ANSI 编码即可.

不同 ANSI 编码之间互不兼容，当信息在国际间交流时，无法将属于两种语言的文字，存储在同一段 ANSI 编码的文本中。一个很大的缺点是，同一个编码值，在不同的编码体系里代表着不同的字。这样就容易造成混乱。导致了 unicode 码的诞生。 其中每个语言下的 ANSI 编码，都有一套一对一的编码转换器，Unicode 变成所有编码转换的中间介质。所有的编码都有一个转换器可以转换到 Unicode，而 Unicode 也可以转换到其他所有的编码。

5.GB2312（ASCII 的中文扩展）
等中国人们得到计算机时，已经没有可以利用的字节状态来表示汉字，况且有 6000 多个常用汉字需要保存呢。但是这难不倒智慧的中国人民，我们不客气地把那些 127 号之后的奇异符号们直接取消掉,

规定：一个小于 127 的字符的意义与原来相同，但两个大于 127 的字符连在一起时，就表示一个汉字，前面的一个字节（他称之为高字节）从 0xA1 用到 0xF7，后面一个字节（低字节）从 0xA1 到 0xFE，这样我们就可以组合出大约 7000 多个简体汉字了。在这些编码里，我们还把数学符号、罗马希腊的 字母、日文的假名们都编进去了，连在 ASCII 里本来就有的数字、标点、字母都统统重新编了两个字节长的编码，这就是常说的"全角"字符，而原来在 127 号以下的那些就叫"半角"字符了。

GB 2312 是一个简体中文字符集，由 6763 个常用汉字和 682 个全角的非汉字字符组成。其中汉字根据使用的频率分为两级。一级汉字 3755 个，二级汉字 3008 个。由于字符数量比较大，GB2312 采用了二维矩阵编码法对所有字符进行编码。首先构造一个 94 行 94 列的方阵，对每一行称为一个“区”，每一列称为一个“位”，然后将所有字符依照下表的规律填写到方阵中。这样所有的字符在方阵中都有一个唯一的位置，这个位置可以用区号、位号合成表示，称为字符的区位码。如第一个汉字“啊”出现在第 16 区的第 1 位上，其区位码为 1601。因为区位码同字符的位置是完全对应的，因此区位码同字符之间也是一一对应的。这样所有的字符都可通过其区位码转换为数字编码信息。

中国人民看到这样很不错，于是就把这种汉字方案叫做 “GB2312"。GB2312 是 ANSI 编码的一种，即对 ASCII 的中文扩展。是中国国家标准总局发布了一系列的汉字字符集国家标准编码，统称为 GB 码，或国标码。其中最有影响的是于 1980 年发布的《信息交换用汉字编码字符集 基本集》，标准号为 GB 2312-1980,因其使用非常普遍，也常被通称为国标码。GB2312 编码通行于我国内地；新加坡等地也采用此编码。几乎所有的中文系统和国际化的软件都支持 GB 2312。

GB2312 编码用两个字节(8 位 2 进制)表示一个汉字，所以理论上最多可以表示 256×256=65536 个汉字。但这种编码方式也仅仅在中国行得通，如果您的网页使用的 GB2312 编码，那么很多外国人在浏览你的网页时就可能无法正常显示，因为其浏览器不支持 GB2312 编码。当然，中国人在浏览外国网页(比如日文)时，也会出现乱码或无法打开的情况，因为我们的浏览器没有安装日文的编码表。

但由于中国的汉字太多了，我们很快就就发现有许多人的人名没有办法在这里打出来，特别是某些很会麻烦别人的国家领导人。于是我们不得不继续把 GB2312 没有用到的码位找出来老实不客气地用上。

GBK:后来还是不够用，于是干脆不再要求低字节一定是 127 号之后的内码，只要第一个字节是大于 127 就固定表示这是一个汉字的开始，不管后面跟的是不是扩展字 符集里的内容。结果扩展之后的编码方案被称为 GBK 标准，GBK 包括了 GB2312 的所有内容，同时又增加了近 20000 个新的汉字（包括繁体字）和符号。

GB18030:后来少数民族也要用电脑了，于是我们再扩展，又加了几千个新的少数民族的字，GBK 扩成了 GB18030。从此之后，中华民族的文化就可以在计算机时代中传承了。

GB 18030，全称：国家标准 GB 18030-2005《信息技术 中文编码字符集》，是中华人民共和国现时最新的内码字集，是 GB 18030-2000《信息技术 信息交换用汉字编码字符集 基本集的扩充》的修订版。与 GB 2312 完全兼容，与 GBK 基本兼容，支持 GB 13000 及 Unicode 的全部统一汉字，共收录汉字 70244 个。GB 18030 主要有以下特点：

与 UTF-8 相同，采用多字节编码，每个字可以由 1 个、2 个或 4 个字节组成。
编码空间庞大，最多可定义 161 万个字符。
支持中国国内少数民族的文字，不需要动用造字区。
汉字收录范围包含繁体汉字以及日韩汉字
中国的程序员们看到这一系列汉字编码的标准是好的，于是通称他们叫做 “DBCS"（Double Byte Charecter Set 双字节字符集）。在 DBCS 系列标准里，最大的特点是两字节长的汉字字符和一字节长的英文字符并存于同一套编码方案里，因此他们写的程序为了支持中文处 理，必须要注意字串里的每一个字节的值，如果这个值是大于 127 的，那么就认为一个双字节字符集里的字符出现了。那时候凡是受过加持，会编程的计算机僧侣 们都要每天念下面这个咒语数百遍：

“一个汉字算两个英文字符！一个汉字算两个英文字符……”

6.BIG5 编码
在台湾、香港与澳门地区，使用的是繁体中文字符集。而 1980 年发布的 GB2312 面向简体中文字符集，并不支持繁体汉字。在这些使用繁体中文字符集的地区，一度出现过很多不同厂商提出的字符集编码，这些编码彼此互不兼容，造成了信息交流的困难。为统一繁体字符集编码，1984 年，台湾五大厂商宏碁、神通、佳佳、零壹以及大众一同制定了一种繁体中文编码方案，因其来源被称为五大码，英文写作 Big5，后来按英文翻译回汉字后，普遍被称为大五码。

大五码是一种繁体中文汉字字符集，其中繁体汉字 13053 个，808 个标点符号、希腊字母及特殊符号。大五码的编码码表直接针对存储而设计，每个字符统一使用两个字节存储表示。第 1 字节范围 81H－FEH，避开了同 ASCII 码的冲突，第 2 字节范围是 40H－7EH 和 A1H－FEH。因为 Big5 的字符编码范围同 GB2312 字符的存储码范围存在冲突，所以在同一正文不能对两种字符集的字符同时支持。 Big5 编码的分布如表 1－5 所示，Big5 字符主要部分集中在三个段内：标点符号、希腊字母及特殊符号；常用汉字；非常用汉字。其余部分保留给其他厂商支持。

img

Big5 编码推出后，得到了繁体中文软件厂商的广泛支持，在使用繁体汉字的地区迅速普及使用。目前，Big5 编码在台湾、香港、澳门及其他海外华人中普遍使用，成为了繁体中文编码的事实标准。在互联网中检索繁体中文网站，所打开的网页中，大多都是通过 Big5 编码产生的文档。

因为当时各个国家都像中国这样搞出一套自己的编码标准，结果互相之间谁也不懂谁的编码，谁也不支持别人的编码，连大陆和台湾这样只相隔了 150 海里，使用 着同一种语言的兄弟地区，也分别采用了不同的 DBCS 编码方案——当时的中国人想让电脑显示汉字，就必须装上一个"汉字系统"，专门用来处理汉字的显示、输入的问题，但是那个台湾的愚昧封建人士写的算命程序 就必须加装另一套支持 BIG5 编码的什么"倚天汉字系统"才可以用，装错了字符系统，显示就会乱了套！这怎么办？而且世界民族之林中还有那些一时用不上电脑的穷苦人民，他们的文字又怎 么办？

7.UNICODE
如上 ANSI 编码条例中所述，世界上存在着多种编码方式，在 ANSi 编码下，同一个编码值，在不同的编码体系里代表着不同的字，。在简体中文系统下，ANSI 编码代表 GB2312 编码，在日文操作系统下，ANSI 编码代表 JIS 编码，可能最终显示的是中文，也可能显示的是日文。在 ANSI 编码体系下，要想打开一个文本文件，不但要知道它的编码方式，还要安装有对应编码表，否则就可能无法读取或出现乱码。为什么电子邮件和网页都经常会出现乱码，就是因为信息的提供者可能是日文的 ANSI 编码体系和信息的读取者可能是中文的编码体系，他们对同一个二进制编码值进行显示，采用了不同的编码，导致乱码。这个问题促使了 unicode 码的诞生。

如果有一种编码，将世界上所有的符号都纳入其中，无论是英文、日文、还是中文等，大家都使用这个编码表，就不会出现编码不匹配现象。每个符号对应一个唯一的编码，乱码问题就不存在了。这就是 Unicode 编码。

Unicode 当然是一个很大的集合，现在的规模可以容纳 100 多万个符号。每个符号的编码都不一样，比如，U+0639 表示阿拉伯字母 Ain，U+0041 表示英语的大写字母 A，“汉”这个字的 Unicode 编码是 U+6C49。

Unicode 固然统一了编码方式，但是它的效率不高，比如 UCS-4(Unicode 的标准之一)规定用 4 个字节存储一个符号，那么每个英文字母前都必然有三个字节是 0，这对存储和传输来说都很耗资源。

Unicode 的问题:

需要注意的是，Unicode 只是一个符号集，它只规定了符号的二进制代码，却没有规定这个二进制代码应该如何存储。

比如，汉字“严”的 unicode 是十六进制数 4E25，转换成二进制数足足有 15 位（100111000100101），也就是说这个符号的表示至少需要 2 个字节。表示其他更大的符号，可能需要 3 个字节或者 4 个字节，甚至更多。这里就有两个严重的问题:

第一个问题是，如何才能区别 unicode 和 ascii？计算机怎么知道三个字节表示一个符号，而不是分别表示三个符号呢？

第二个问题是，我们已经知道，英文字母只用一个字节表示就够了，如果 unicode 统一规定，每个符号用三个或四个字节表示，那么每个英文字母前都必然有二到三个字节是 0，这对于存储来说是极大的浪费，文本文件的大小会因此大出二三倍，这是无法接受的。

它们造成的结果是：1）出现了 unicode 的多种存储方式，也就是说有许多种不同的二进制格式，可以用来表示 unicode。2）unicode 在很长一段时间内无法推广，直到互联网的出现。

7.UTF8
互联网的普及，强烈要求出现一种统一的编码方式。UTF-8 就是在互联网上使用最广的一种 unicode 的实现方式。其他实现方式还包括 UTF-16 和 UTF-32，不过在互联网上基本不用。重复一遍，这里的关系是，UTF-8 是 Unicode 的实现方式之一。

UTF-8 最大的一个特点，就是它是一种变长的编码方式。它可以使用 1~4 个字节表示一个符号，根据不同的符号而变化字节长度。

UTF-8 的编码规则很简单，只有二条：

1）对于单字节的符号，字节的第一位设为 0，后面 7 位为这个符号的 unicode 码。因此对于英语字母，UTF-8 编码和 ASCII 码是相同的。

2）对于 n 字节的符号（n>1），第一个字节的前 n 位都设为 1，第 n+1 位设为 0，后面字节的前两位一律设为 10。剩下的没有提及的二进制位，全部为这个符号的 unicode 码。下表总结了编码规则，字母 x 表示可用编码的位。

Unicode 符号范围 | UTF-8 编码方式
(十六进制) | （二进制）
--------------------+---------------------------------------------
0000 0000-0000 007F | 0xxxxxxx
0000 0080-0000 07FF | 110xxxxx 10xxxxxx
0000 0800-0000 FFFF | 1110xxxx 10xxxxxx 10xxxxxx
0001 0000-0010 FFFF | 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx
下面，还是以汉字“严”为例，演示如何实现 UTF-8 编码。

已知“严”的 unicode 是 4E25（100111000100101），根据上表，可以发现 4E25 处在第三行的范围内（0000 0800-0000 FFFF），因此“严”的 UTF-8 编码需要三个字节，即格式是“1110xxxx 10xxxxxx 10xxxxxx”。然后，从“严”的最后一个二进制位开始，依次从后向前填入格式中的 x，多出的位补 0。这样就得到了，“严”的 UTF-8 编码是“11100100 10111000 10100101”，转换成十六进制就是 E4B8A5。

7.UTF8 与 Unicode 之间的转换
通过上一节的例子，可以看到“严”的 Unicode 码是 4E25，UTF-8 编码是 E4B8A5，两者是不一样的。它们之间的转换可以通过程序实现。

在 Windows 平台下，有一个最简单的转化方法，就是使用内置的记事本小程序 Notepad.exe。打开文件后，点击“文件”菜单中的“另存为”命令，会跳出一个对话框，在最底部有一个“编码”的下拉条。

img

里面有四个选项：ANSI，Unicode，Unicode big endian 和 UTF-8。

1）ANSI 是默认的编码方式。对于英文文件是 ASCII 编码，对于简体中文文件是 GB2312 编码（只针对 Windows 简体中文版，如果是繁体中文版会采用 Big5 码）。

2）Unicode 编码指的是 UCS-2 编码方式，即直接用两个字节存入字符的 Unicode 码。这个选项用的 little endian 格式。

3）Unicode big endian 编码与上一个选项相对应。我在下一节会解释 little endian 和 big endian 的涵义。

4）UTF-8 编码，也就是上一节谈到的编码方法。

选择完”编码方式“后，点击”保存“按钮，文件的编码方式就立刻转换好了。

```

```
